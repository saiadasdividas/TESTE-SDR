<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Treinamento SDR - Embalagens Conceito</title>
<!-- Firebase SDK -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-app-compat.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-firestore-compat.min.js"></script>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Arial', sans-serif;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
min-height: 100vh;
color: #333;
}

.container {
max-width: 1200px;
margin: 0 auto;
padding: 20px;
}

.header {
text-align: center;
margin-bottom: 40px;
background: white;
padding: 30px;
border-radius: 20px;
box-shadow: 0 15px 35px rgba(0,0,0,0.1);
}

.header h1 {
color: #4a5568;
font-size: 2.5rem;
margin-bottom: 10px;
font-weight: bold;
}

.header p {
color: #718096;
font-size: 1.2rem;
}

/* Login Section */
.login-section {
margin-top: 20px;
padding: 20px;
background: #f8fafc;
border-radius: 15px;
border: 2px solid #e2e8f0;
}

.login-form {
display: flex;
gap: 15px;
justify-content: center;
align-items: center;
flex-wrap: wrap;
margin-bottom: 15px;
}

.login-form input {
padding: 12px 15px;
border-radius: 10px;
border: 2px solid #e2e8f0;
font-size: 16px;
min-width: 200px;
}

.login-form input:focus {
outline: none;
border-color: #667eea;
}

.sdr-info {
display: none;
text-align: center;
padding: 15px;
background: #e6fffa;
border-radius: 10px;
border: 2px solid #38b2ac;
}

.cards-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
gap: 20px;
margin-bottom: 40px;
}

.card {
background: white;
border-radius: 20px;
padding: 0;
box-shadow: 0 10px 25px rgba(0,0,0,0.1);
transition: all 0.3s ease;
overflow: hidden;
cursor: pointer;
min-height: 200px;
display: flex;
flex-direction: column;
}

.card:hover {
transform: translateY(-5px);
box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}

.card.completed {
border: 3px solid #38a169;
}

.card.completed .card-header {
background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
}

.card-header {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
padding: 25px;
text-align: center;
}

.card-header h3 {
font-size: 1.3rem;
font-weight: bold;
margin-bottom: 8px;
}

.card-description {
font-size: 0.9rem;
opacity: 0.95;
}

.card-content {
padding: 25px;
flex: 1;
display: flex;
flex-direction: column;
justify-content: center;
text-align: center;
}

.card-status {
font-size: 1.1rem;
color: #718096;
margin-bottom: 15px;
}

.card.completed .card-status {
color: #38a169;
font-weight: bold;
}

.card-disabled {
opacity: 0.6;
cursor: not-allowed;
}

.card-disabled:hover {
transform: none;
box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

.progress-section {
background: white;
border-radius: 20px;
padding: 30px;
box-shadow: 0 15px 35px rgba(0,0,0,0.1);
margin-bottom: 30px;
}

.progress-section h2 {
color: #4a5568;
margin-bottom: 20px;
text-align: center;
}

.progress-bar {
width: 100%;
height: 20px;
background: #e2e8f0;
border-radius: 10px;
overflow: hidden;
margin-bottom: 15px;
}

.progress-fill {
height: 100%;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
width: 0%;
transition: width 0.5s ease;
border-radius: 10px;
}

.progress-text {
text-align: center;
color: #718096;
font-weight: bold;
font-size: 1.1rem;
}

/* Modal Styles */
.modal {
display: none;
position: fixed;
z-index: 1000;
left: 0;
top: 0;
width: 100%;
height: 100%;
background-color: rgba(0,0,0,0.8);
animation: fadeIn 0.3s ease;
}

.modal-content {
background-color: white;
margin: 5% auto;
padding: 0;
border-radius: 20px;
width: 90%;
max-width: 800px;
max-height: 85vh;
overflow-y: auto;
animation: slideIn 0.3s ease;
}

.modal-header {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
padding: 25px;
border-radius: 20px 20px 0 0;
display: flex;
justify-content: space-between;
align-items: center;
}

.modal-header h2 {
margin: 0;
font-size: 1.5rem;
}

.close {
color: white;
font-size: 28px;
font-weight: bold;
cursor: pointer;
}

.close:hover {
opacity: 0.8;
}

.modal-body {
padding: 30px;
}

.practice-area {
margin-bottom: 25px;
}

.practice-area label {
display: block;
margin-bottom: 10px;
font-weight: bold;
color: #2d3748;
font-size: 1.1rem;
}

.practice-area textarea {
width: 100%;
min-height: 120px;
padding: 15px;
border: 2px solid #e2e8f0;
border-radius: 10px;
font-family: inherit;
font-size: 14px;
transition: border-color 0.3s ease;
resize: vertical;
}

.practice-area textarea:focus {
outline: none;
border-color: #667eea;
box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.modal-footer {
padding: 20px 30px;
border-top: 1px solid #e2e8f0;
display: flex;
justify-content: space-between;
align-items: center;
}

.btn {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border: none;
padding: 12px 25px;
border-radius: 10px;
font-size: 16px;
font-weight: bold;
cursor: pointer;
transition: transform 0.2s ease;
}

.btn:hover {
transform: translateY(-2px);
}

.btn-secondary {
background: #718096;
}

.btn:disabled {
background: #a0aec0;
cursor: not-allowed;
transform: none;
}

.completion-status {
font-size: 0.9rem;
color: #718096;
}

@keyframes fadeIn {
from { opacity: 0; }
to { opacity: 1; }
}

@keyframes slideIn {
from { transform: translateY(-50px); opacity: 0; }
to { transform: translateY(0); opacity: 1; }
}

@media (max-width: 768px) {
.container {
padding: 15px;
}

.header h1 {
font-size: 2rem;
}

.cards-grid {
grid-template-columns: 1fr;
gap: 15px;
}

.login-form {
flex-direction: column;
align-items: stretch;
}

.login-form input {
min-width: auto;
}

.modal-content {
width: 95%;
margin: 10% auto;
}
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>üéØ Treinamento SDR</h1>
<p>Embalagens Conceito - Dominando a Arte da Prospec√ß√£o B2B</p>

<div class="login-section">
<div id="loginForm" class="login-form">
<input type="text" id="sdrName" placeholder="Seu nome completo">
<input type="email" id="sdrEmail" placeholder="Seu e-mail">
<button class="btn" onclick="initializeSDR()">Iniciar Treinamento</button>
</div>
<div id="sdrInfo" class="sdr-info">
<p><strong>SDR:</strong> <span id="currentSDRName"></span> | <strong>Iniciado em:</strong> <span id="startTime"></span></p>
<button class="btn btn-secondary" onclick="logoutSDR()">Finalizar Sess√£o</button>
</div>
</div>
</div>

<div class="progress-section">
<h2>üìà Seu Progresso no Treinamento</h2>
<div class="progress-bar">
<div class="progress-fill" id="progressFill"></div>
</div>
<div class="progress-text" id="progressText">Fa√ßa login para come√ßar</div>
</div>

<div class="cards-grid" id="cardsGrid">
<div class="card card-disabled" data-module="1">
<div class="card-header">
<h3>üè™ Identifica√ß√£o de Oportunidades</h3>
<div class="card-description">Reconhe√ßa sinais de que lojistas precisam de fornecedores</div>
</div>
<div class="card-content">
<div class="card-status">Clique para iniciar</div>
<p>Aprenda a identificar oportunidades de neg√≥cio com lojistas e distribuidores.</p>
</div>
</div>

<div class="card card-disabled" data-module="2">
<div class="card-header">
<h3>üéØ Perfil do Cliente Ideal</h3>
<div class="card-description">Defina seu p√∫blico-alvo perfeito</div>
</div>
<div class="card-content">
<div class="card-status">Clique para iniciar</div>
<p>Construa o perfil detalhado dos lojistas ideais para seu produto.</p>
</div>
</div>

<div class="card card-disabled" data-module="3">
<div class="card-header">
<h3>üìû T√©cnicas de Qualifica√ß√£o</h3>
<div class="card-description">Domine a metodologia BANT</div>
</div>
<div class="card-content">
<div class="card-status">Clique para iniciar</div>
<p>Aprenda a qualificar prospects usando Budget, Authority, Need e Timeline.</p>
</div>
</div>

<div class="card card-disabled" data-module="4">
<div class="card-header">
<h3>üìß Scripts de E-mail</h3>
<div class="card-description">Crie e-mails que convertem</div>
</div>
<div class="card-content">
<div class="card-status">Clique para iniciar</div>
<p>Desenvolva templates eficazes para diferentes momentos da prospec√ß√£o.</p>
</div>
</div>

<div class="card card-disabled" data-module="5">
<div class="card-header">
<h3>‚òéÔ∏è Scripts de Cold Call</h3>
<div class="card-description">Domine as liga√ß√µes de prospec√ß√£o</div>
</div>
<div class="card-content">
<div class="card-status">Clique para iniciar</div>
<p>Crie abordagens eficazes e trate obje√ß√µes com confian√ßa.</p>
</div>
</div>

<div class="card card-disabled" data-module="6">
<div class="card-header">
<h3>üîç Pesquisa e Prospecting</h3>
<div class="card-description">Encontre prospects qualificados</div>
</div>
<div class="card-content">
<div class="card-status">Clique para iniciar</div>
<p>Domine t√©cnicas de pesquisa para encontrar lojistas ideais.</p>
</div>
</div>

<div class="card card-disabled" data-module="7">
<div class="card-header">
<h3>üõ°Ô∏è Tratamento de Obje√ß√µes</h3>
<div class="card-description">Transforme "n√£o" em oportunidade</div>
</div>
<div class="card-content">
<div class="card-status">Clique para iniciar</div>
<p>Aprenda a lidar com as obje√ß√µes mais comuns dos lojistas.</p>
</div>
</div>

<div class="card card-disabled" data-module="8">
<div class="card-header">
<h3>üîÑ Follow-up Estrat√©gico</h3>
<div class="card-description">Converta prospects ao longo do tempo</div>
</div>
<div class="card-content">
<div class="card-status">Clique para iniciar</div>
<p>Desenvolva uma estrat√©gia sistem√°tica de acompanhamento.</p>
</div>
</div>
</div>
</div>

<!-- Modal -->
<div id="trainingModal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h2 id="modalTitle">M√≥dulo de Treinamento</h2>
<span class="close" onclick="closeModal()">&times;</span>
</div>
<div class="modal-body" id="modalBody">
<!-- Conte√∫do ser√° inserido dinamicamente -->
</div>
<div class="modal-footer">
<div class="completion-status" id="completionStatus">
<span id="answeredCount">0</span> de <span id="totalQuestions">0</span> perguntas respondidas
</div>
<button class="btn" id="completeBtn" onclick="completeModule()" disabled>Concluir M√≥dulo</button>
</div>
</div>
</div>

<script>
// Configura√ß√£o do Firebase
const firebaseConfig = {
    apiKey: "AIzaSyAxkOOHB1m2vhleekARWnXyhnTjCt251LQ",
    authDomain: "plataforma-de-treinament-9a00b.firebaseapp.com",
    projectId: "plataforma-de-treinament-9a00b",
    storageBucket: "plataforma-de-treinament-9a00b.firebasestorage.app",
    messagingSenderId: "192125351398",
    appId: "1:192125351398:web:c16cc461c4c853132a1227"
};

// Inicializar Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// Vari√°veis globais
let currentSDR = null;
let sessionId = null;
let trainingStartTime = null;
let currentModule = null;
let completedModules = [];

// Dados dos m√≥dulos
const moduleData = {
    1: {
        title: "üè™ Identifica√ß√£o de Oportunidades",
        questions: [
            {
                label: "Liste 3 indicadores de que um lojista pode precisar de embalagens:",
                placeholder: "Ex: Estoque baixo vis√≠vel, promo√ß√µes em embalagens antigas, expans√£o da loja..."
            }
        ]
    },
    2: {
        title: "üéØ Perfil do Cliente Ideal",
        questions: [
            {
                label: "Descreva o perfil do lojista ideal para seu produto:",
                placeholder: "Ex: Loja de doces h√° mais de 2 anos, vende entre 500-2000 unidades/m√™s, localizada em shopping..."
            },
            {
                label: "Quais s√£o as principais dores desse lojista?",
                placeholder: "Ex: Dificuldade para encontrar fornecedores confi√°veis, pre√ßos competitivos, variedade..."
            }
        ]
    },
    3: {
        title: "üìû T√©cnicas de Qualifica√ß√£o",
        questions: [
            {
                label: "Perguntas para qualificar OR√áAMENTO:",
                placeholder: "Ex: Qual o volume mensal de embalagens que voc√™s trabalham? Voc√™s j√° t√™m um or√ßamento definido?"
            },
            {
                label: "Perguntas para identificar AUTORIDADE:",
                placeholder: "Ex: Quem toma as decis√µes de compra na loja? Voc√™s t√™m um processo de aprova√ß√£o?"
            },
            {
                label: "Perguntas para identificar NECESSIDADE:",
                placeholder: "Ex: Como voc√™s escolhem seus fornecedores atuais? T√™m alguma dificuldade?"
            }
        ]
    },
    4: {
        title: "üìß Scripts de E-mail",
        questions: [
            {
                label: "E-mail de primeiro contato para loja de doces:",
                placeholder: "Assunto: Novas oportunidades para sua loja\nOl√° [Nome],\n\nVi que voc√™s t√™m uma loja muito bem avaliada..."
            },
            {
                label: "E-mail de follow-up (sem resposta):",
                placeholder: "Assunto: Re: Parceria em embalagens\nOl√° [Nome],\n\nSei que devem estar ocupados..."
            }
        ]
    },
    5: {
        title: "‚òéÔ∏è Scripts de Cold Call",
        questions: [
            {
                label: "Abertura para lojista:",
                placeholder: "Ol√°, [Nome]! Aqui √© [Seu Nome] da Embalagens Conceito. Estou ligando porque..."
            },
            {
                label: "Tratamento de obje√ß√£o - 'J√° temos fornecedor':",
                placeholder: "Entendo perfeitamente! A maioria dos nossos clientes tamb√©m j√° tinham fornecedores..."
            }
        ]
    },
    6: {
        title: "üîç Pesquisa e Prospecting",
        questions: [
            {
                label: "Onde encontrar lojistas qualificados:",
                placeholder: "Ex: Google Maps (lojas de doces + cidade), redes sociais, associa√ß√µes comerciais..."
            },
            {
                label: "Informa√ß√µes para coletar antes do contato:",
                placeholder: "Ex: Tempo de mercado, tamanho da loja, se j√° revendem embalagens..."
            }
        ]
    },
    7: {
        title: "üõ°Ô∏è Tratamento de Obje√ß√µes",
        questions: [
            {
                label: "Obje√ß√£o: 'Seus pre√ßos s√£o muito altos'",
                placeholder: "Entendo sua preocupa√ß√£o com o investimento. Posso te mostrar como nossos clientes recuperam..."
            },
            {
                label: "Obje√ß√£o: 'N√£o temos tempo agora'",
                placeholder: "Sei que voc√™s est√£o sempre ocupados, √© sinal de que a loja vai bem! Que tal agendarmos..."
            }
        ]
    },
    8: {
        title: "üîÑ Follow-up Estrat√©gico",
        questions: [
            {
                label: "Cronograma de follow-up (dias ap√≥s primeiro contato):",
                placeholder: "Dia 3: E-mail com case de sucesso\nDia 7: Liga√ß√£o de follow-up..."
            },
            {
                label: "Como adicionar valor em cada follow-up:",
                placeholder: "Ex: Compartilhar tend√™ncias do setor, cases de clientes similares, dicas de vendas..."
            }
        ]
    }
};

// Inicializar SDR
function initializeSDR() {
    const name = document.getElementById('sdrName').value.trim();
    const email = document.getElementById('sdrEmail').value.trim();
    
    if (!name || !email) {
        alert('Por favor, preencha seu nome e e-mail para continuar.');
        return;
    }
    
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
        alert('Por favor, insira um e-mail v√°lido.');
        return;
    }
    
    currentSDR = { name, email };
    sessionId = generateSessionId();
    trainingStartTime = new Date();
    
    // Salvar in√≠cio da sess√£o
    saveToFirebase('session_start', {
        sdrName: name,
        sdrEmail: email,
        sessionId: sessionId,
        startTime: trainingStartTime,
        status: 'iniciado'
    });
    
    // Atualizar interface
    document.getElementById('loginForm').style.display = 'none';
    document.getElementById('sdrInfo').style.display = 'block';
    document.getElementById('currentSDRName').textContent = name;
    document.getElementById('startTime').textContent = trainingStartTime.toLocaleString('pt-BR');
    document.getElementById('progressText').textContent = '0% Conclu√≠do - Clique em um m√≥dulo para come√ßar';
    
    // Habilitar cards
    enableTraining();
}

// Logout do SDR
function logoutSDR() {
    if (confirm('Tem certeza que deseja finalizar a sess√£o? O progresso ser√° salvo.')) {
        saveToFirebase('session_end', {
            sessionId: sessionId,
            endTime: new Date(),
            status: 'finalizado'
        });
        location.reload();
    }
}

// Gerar ID √∫nico da sess√£o
function generateSessionId() {
    return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
}

// Habilitar treinamento
function enableTraining() {
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => {
        card.classList.remove('card-disabled');
        card.addEventListener('click', () => {
            const moduleNum = parseInt(card.dataset.module);
            openModule(moduleNum);
        });
    });
}

// Abrir m√≥dulo
function openModule(moduleNum) {
    if (!currentSDR) {
        alert('Fa√ßa login primeiro!');
        return;
    }
    
    currentModule = moduleNum;
    const module = moduleData[moduleNum];
    
    document.getElementById('modalTitle').textContent = module.title;
    
    const modalBody = document.getElementById('modalBody');
    modalBody.innerHTML = '';
    
    module.questions.forEach((question, index) => {
        const questionDiv = document.createElement('div');
        questionDiv.className = 'practice-area';
        questionDiv.innerHTML = `
            <label>${question.label}</label>
            <textarea 
                id="question_${moduleNum}_${index}" 
                placeholder="${question.placeholder}"
                data-module="${moduleNum}"
                data-question="${index}">
            </textarea>
        `;
        modalBody.appendChild(questionDiv);
    });
    
    // Atualizar status de completude
    updateCompletionStatus(moduleNum);
    
    // Adicionar listeners
    addTextareaListeners(moduleNum);
    
    document.getElementById('trainingModal').style.display = 'block';
}

// Fechar modal
function closeModal() {
    document.getElementById('trainingModal').style.display = 'none';
}

// Adicionar listeners aos textareas
function addTextareaListeners(moduleNum) {
    const textareas = document.querySelectorAll(`textarea[data-module="${moduleNum}"]`);
    textareas.forEach(textarea => {
        textarea.addEventListener('input', function() {
            const questionIndex = this.dataset.question;
            const module = moduleData[moduleNum];
            
            saveToFirebase('answer', {
                sessionId: sessionId,
                moduleNumber: moduleNum,
                moduleTitle: module.title,
                questionIndex: parseInt(questionIndex),
                question: module.questions[questionIndex].label,
                answer: this.value,
                timestamp: new Date()
            });
            
            updateCompletionStatus(moduleNum);
        });
    });
}

// Atualizar status de completude do m√≥dulo
function updateCompletionStatus(moduleNum) {
    const textareas = document.querySelectorAll(`textarea[data-module="${moduleNum}"]`);
    const totalQuestions = textareas.length;
    let answeredCount = 0;
    
    textareas.forEach(textarea => {
        if (textarea.value.trim().length > 10) {
            answeredCount++;
        }
    });
    
    document.getElementById('answeredCount').textContent = answeredCount;
    document.getElementById('totalQuestions').textContent = totalQuestions;
    
    const completeBtn = document.getElementById('completeBtn');
    if (answeredCount === totalQuestions) {
        completeBtn.disabled = false;
        completeBtn.textContent = 'Concluir M√≥dulo ‚úì';
    } else {
        completeBtn.disabled = true;
        completeBtn.textContent = 'Concluir M√≥dulo';
    }
}

// Completar m√≥dulo
function completeModule() {
    if (!currentModule) return;
    
    const textareas = document.querySelectorAll(`textarea[data-module="${currentModule}"]`);
    let allAnswered = true;
    
    textareas.forEach(textarea => {
        if (textarea.value.trim().length < 10) {
            allAnswered = false;
        }
    });
    
    if (!allAnswered) {
        alert('Por favor, responda todas as perguntas com pelo menos 10 caracteres.');
        return;
    }
    
    // Marcar m√≥dulo como conclu√≠do
    if (!completedModules.includes(currentModule)) {
        completedModules.push(currentModule);
        
        // Salvar conclus√£o do m√≥dulo
        saveToFirebase('module_completed', {
            sessionId: sessionId,
            moduleNumber: currentModule,
            moduleTitle: moduleData[currentModule].title,
            completionTime: new Date()
        });
        
        // Atualizar visual do card
        const card = document.querySelector(`[data-module="${currentModule}"]`);
        card.classList.add('completed');
        card.querySelector('.card-status').textContent = 'Conclu√≠do ‚úì';
        
        updateProgress();
    }
    
    closeModal();
}

// Atualizar progresso geral
function updateProgress() {
    const totalModules = Object.keys(moduleData).length;
    const progress = Math.round((completedModules.length / totalModules) * 100);
    
    document.getElementById('progressFill').style.width = progress + '%';
    document.getElementById('progressText').textContent = `${progress}% Conclu√≠do (${completedModules.length}/${totalModules} m√≥dulos)`;
    
    // Salvar progresso
    saveToFirebase('progress', {
        sessionId: sessionId,
        progress: progress,
        completedModules: completedModules.length,
        totalModules: totalModules,
        timestamp: new Date()
    });
    
    // Verificar se terminou
    if (progress === 100) {
        setTimeout(() => {
            saveToFirebase('training_completed', {
                sessionId: sessionId,
                completionTime: new Date(),
                totalDuration: new Date() - trainingStartTime
            });
            
            alert('üéâ Parab√©ns! Voc√™ concluiu o treinamento SDR! Suas respostas foram enviadas para avalia√ß√£o.');
        }, 500);
    }
}

// Salvar dados no Firebase
async function saveToFirebase(type, data) {
    try {
        await db.collection('sdr_training').add({
            type: type,
            data: data,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
        console.log('Dados salvos:', type);
    } catch (error) {
        console.error('Erro ao salvar:', error);
    }
}

// Fechar modal clicando fora
window.onclick = function(event) {
    const modal = document.getElementById('trainingModal');
    if (event.target === modal) {
        closeModal();
    }
}

// Salvar estado ao sair
window.addEventListener('beforeunload', function() {
    if (currentSDR) {
        saveToFirebase('session_pause', {
            sessionId: sessionId,
            pauseTime: new Date(),
            status: 'pausado'
        });
    }
});
</script>
</body>
</html>
